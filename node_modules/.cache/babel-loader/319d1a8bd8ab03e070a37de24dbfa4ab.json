{"remainingRequest":"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/babel-loader/lib/index.js!/Users/linchengxun/Desktop/vuego-testfunc/node_modules/eslint-loader/index.js??ref--13-0!/Users/linchengxun/Desktop/vuego-testfunc/wgo.js-master/wgo/player.js","dependencies":[{"path":"/Users/linchengxun/Desktop/vuego-testfunc/wgo.js-master/wgo/player.js","mtime":1552534424194},{"path":"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["/* eslint-disable */\n(function (WGo) {\n  \"use strict\";\n\n  var FileError = function FileError(path, code) {\n    this.name = \"FileError\";\n    if (code == 1) this.message = \"File '\" + path + \"' is empty.\";else if (code == 2) this.message = \"Network error. It is not possible to read '\" + path + \"'.\";else this.message = \"File '\" + path + \"' hasn't been found on server.\";\n  };\n\n  FileError.prototype = new Error();\n  FileError.prototype.constructor = FileError;\n  WGo.FileError = FileError; // ajax function for loading of files\n\n  var loadFromUrl = WGo.loadFromUrl = function (url, callback) {\n    var xmlhttp = new XMLHttpRequest();\n\n    xmlhttp.onreadystatechange = function () {\n      if (xmlhttp.readyState == 4) {\n        if (xmlhttp.status == 200) {\n          if (xmlhttp.responseText.length == 0) {\n            throw new FileError(url, 1);\n          } else {\n            callback(xmlhttp.responseText);\n          }\n        } else {\n          throw new FileError(url);\n        }\n      }\n    };\n\n    try {\n      xmlhttp.open(\"GET\", url, true);\n      xmlhttp.send();\n    } catch (err) {\n      throw new FileError(url, 2);\n    }\n  }; // basic updating function - handles board changes\n\n\n  var update_board = function update_board(e) {\n    // update board's position\n    if (e.change) this.board.update(e.change); // remove old markers from the board\n\n    if (this.temp_marks) this.board.removeObject(this.temp_marks); // init array for new objects\n\n    var add = [];\n    this.notification(); // add current move marker\n\n    if (e.node.move && this.config.markLastMove) {\n      if (e.node.move.pass) this.notification(WGo.t((e.node.move.c == WGo.B ? \"b\" : \"w\") + \"pass\"));else add.push({\n        type: \"CR\",\n        x: e.node.move.x,\n        y: e.node.move.y\n      });\n    } // add variation letters\n\n\n    if (e.node.children.length > 1 && this.config.displayVariations) {\n      for (var i = 0; i < e.node.children.length; i++) {\n        if (e.node.children[i].move && !e.node.children[i].move.pass) add.push({\n          type: \"LB\",\n          text: String.fromCharCode(65 + i),\n          x: e.node.children[i].move.x,\n          y: e.node.children[i].move.y,\n          c: this.board.theme.variationColor || \"rgba(0,32,128,0.8)\"\n        });\n      }\n    } // add other markup\n\n\n    if (e.node.markup) {\n      for (var i in e.node.markup) {\n        for (var j = 0; j < add.length; j++) {\n          if (e.node.markup[i].x == add[j].x && e.node.markup[i].y == add[j].y) {\n            add.splice(j, 1);\n            j--;\n          }\n        }\n      }\n\n      add = add.concat(e.node.markup);\n    } // add new markers on the board\n\n\n    this.temp_marks = add;\n    this.board.addObject(add);\n  }; // preparing board\n\n\n  var prepare_board = function prepare_board(e) {\n    // set board size\n    this.board.setSize(e.kifu.size); // remove old objects\n\n    this.board.removeAllObjects(); // activate wheel\n\n    if (this.config.enableWheel) this.setWheel(true);\n  }; // detecting scrolling of element - e.g. when we are scrolling text in comment box, we want to be aware.\n\n\n  var detect_scrolling = function detect_scrolling(node, bp) {\n    if (node == bp.element || node == bp.element) return false;else if (node._wgo_scrollable || node.scrollHeight > node.offsetHeight && window.getComputedStyle(node).overflow == \"auto\") return true;else return detect_scrolling(node.parentNode, bp);\n  }; // mouse wheel event callback, for replaying a game\n\n\n  var wheel_lis = function wheel_lis(e) {\n    var delta = e.wheelDelta || e.detail * -1; // if there is scrolling in progress within an element, don't change position\n\n    if (detect_scrolling(e.target, this)) return true;\n\n    if (delta < 0) {\n      this.next();\n      if (this.config.lockScroll && e.preventDefault) e.preventDefault();\n      return !this.config.lockScroll;\n    } else if (delta > 0) {\n      this.previous();\n      if (this.config.lockScroll && e.preventDefault) e.preventDefault();\n      return !this.config.lockScroll;\n    }\n\n    return true;\n  }; // keyboard click callback, for replaying a game\n\n\n  var key_lis = function key_lis(e) {\n    // disable game replay, when there is focus on some form text field\n    var focusedElements = document.querySelector(\"input:focus, textarea:focus\");\n    if (focusedElements) return true;\n\n    switch (e.keyCode) {\n      case 39:\n        this.next();\n        break;\n\n      case 37:\n        this.previous();\n        break;\n      //case 40: this.selectAlternativeVariation(); break;\n\n      default:\n        return true;\n    }\n\n    if (this.config.lockScroll && e.preventDefault) e.preventDefault();\n    return !this.config.lockScroll;\n  }; // function handling board clicks in normal mode\n\n\n  var board_click_default = function board_click_default(x, y) {\n    if (!this.kifuReader || !this.kifuReader.node) return false;\n\n    for (var i in this.kifuReader.node.children) {\n      if (this.kifuReader.node.children[i].move && this.kifuReader.node.children[i].move.x == x && this.kifuReader.node.children[i].move.y == y) {\n        this.next(i);\n        return;\n      }\n    }\n  }; // coordinates drawing handler - adds coordinates on the board\n\n  /*var coordinates = {\n  \tgrid: {\n  \t\tdraw: function(args, board) {\n  \t\t\tvar ch, t, xright, xleft, ytop, ybottom;\n  \n  \t\t\tthis.fillStyle = \"rgba(0,0,0,0.7)\";\n  \t\t\tthis.textBaseline=\"middle\";\n  \t\t\tthis.textAlign=\"center\";\n  \t\t\tthis.font = board.stoneRadius+\"px \"+(board.font || \"\");\n  \n  \t\t\txright = board.getX(-0.75);\n  \t\t\txleft = board.getX(board.size-0.25);\n  \t\t\tytop = board.getY(-0.75);\n  \t\t\tybottom = board.getY(board.size-0.25);\n  \n  \t\t\tfor(var i = 0; i < board.size; i++) {\n  \t\t\t\tch = i+\"A\".charCodeAt(0);\n  \t\t\t\tif(ch >= \"I\".charCodeAt(0)) ch++;\n  \n  \t\t\t\tt = board.getY(i);\n  \t\t\t\tthis.fillText(board.size-i, xright, t);\n  \t\t\t\tthis.fillText(board.size-i, xleft, t);\n  \n  \t\t\t\tt = board.getX(i);\n  \t\t\t\tthis.fillText(String.fromCharCode(ch), t, ytop);\n  \t\t\t\tthis.fillText(String.fromCharCode(ch), t, ybottom);\n  \t\t\t}\n  \n  \t\t\tthis.fillStyle = \"black\";\n  \t\t}\n  \t}\n  }*/\n\n  /**\n   * We can say this class is abstract, stand alone it doesn't do anything.\n   * However it is useful skelet for building actual player's GUI. Extend this class to create custom player template.\n   * It controls board and inputs from mouse and keyboard, but everything can be overriden.\n   *\n   * Possible configurations:\n   *  - sgf: sgf string (default: undefined)\n   *  - json: kifu stored in json/jgo (default: undefined)\n   *  - sgfFile: sgf file path (default: undefined)\n   *  - board: configuration object of board (default: {})\n   *  - enableWheel: allow player to be controlled by mouse wheel (default: true)\n   *  - lockScroll: disable window scrolling while hovering player (default: true),\n   *  - enableKeys: allow player to be controlled by arrow keys (default: true),\n   *  - markLastMove: marks the last move with a circle (default: true),\n   *\n   * @param {object} config object if form: {key1: value1, key2: value2, ...}\n   */\n\n\n  var Player = function Player(config) {\n    this.config = config; // add default configuration\n\n    for (var key in Player.default) {\n      if (this.config[key] === undefined && Player.default[key] !== undefined) this.config[key] = Player.default[key];\n    }\n\n    this.element = document.createElement(\"div\");\n    this.board = new WGo.Board(this.element, this.config.board);\n    this.init();\n    this.initGame();\n  };\n\n  Player.prototype = {\n    constructor: Player,\n\n    /**\n     * Init player. If you want to call this method PlayerView object must have these properties:\n     *  - player - WGo.Player object\n     *  - board - WGo.Board object (or other board renderer)\n     *  - element - main DOMElement of player\n     */\n    init: function init() {\n      // declare kifu\n      this.kifu = null; // creating listeners\n\n      this.listeners = {\n        kifuLoaded: [prepare_board.bind(this)],\n        update: [update_board.bind(this)],\n        frozen: [],\n        unfrozen: []\n      };\n      if (this.config.kifuLoaded) this.addEventListener(\"kifuLoaded\", this.config.kifuLoaded);\n      if (this.config.update) this.addEventListener(\"update\", this.config.update);\n      if (this.config.frozen) this.addEventListener(\"frozen\", this.config.frozen);\n      if (this.config.unfrozen) this.addEventListener(\"unfrozen\", this.config.unfrozen);\n      this.board.addEventListener(\"click\", board_click_default.bind(this));\n      this.element.addEventListener(\"click\", this.focus.bind(this));\n      this.focus();\n    },\n    initGame: function initGame() {\n      // try to load game passed in configuration\n      if (this.config.sgf) {\n        this.loadSgf(this.config.sgf, this.config.move);\n      } else if (this.config.json) {\n        this.loadJSON(this.config.json, this.config.move);\n      } else if (this.config.sgfFile) {\n        this.loadSgfFromFile(this.config.sgfFile, this.config.move);\n      }\n    },\n\n    /**\n     * Create update event and dispatch it. It is called after position's changed.\n     *\n     * @param {string} op an operation that produced update (e.g. next, previous...)\n     */\n    update: function update(op) {\n      if (!this.kifuReader || !this.kifuReader.change) return;\n      var ev = {\n        type: \"update\",\n        op: op,\n        target: this,\n        node: this.kifuReader.node,\n        position: this.kifuReader.getPosition(),\n        path: this.kifuReader.path,\n        change: this.kifuReader.change //if(!this.kifuReader.node.parent) ev.msg = this.getGameInfo();\n\n      };\n      this.dispatchEvent(ev);\n    },\n\n    /**\n     * Prepare kifu for replaying. Event 'kifuLoaded' is triggered.\n     *\n     * @param {WGo.Kifu} kifu object\n     * @param {Array} path array\n     */\n    loadKifu: function loadKifu(kifu, path) {\n      this.kifu = kifu; // kifu is replayed by KifuReader, it manipulates a Kifu object and gets all changes\n\n      this.kifuReader = new WGo.KifuReader(this.kifu, this.config.rememberPath, this.config.allowIllegalMoves); // fire kifu loaded event\n\n      this.dispatchEvent({\n        type: \"kifuLoaded\",\n        target: this,\n        kifu: this.kifu\n      }); // handle permalink\n\n      /*if(this.config.permalinks) {\n      \tif(!permalinks.active) init_permalinks();\n      \tif(permalinks.query.length && permalinks.query[0] == this.view.element.id) {\n      \t\thandle_hash(this);\n      \t}\n      }*/\n      // update player - initial position in kifu doesn't have to be an empty board\n\n      this.update(\"init\");\n\n      if (path) {\n        this.goTo(path);\n      }\n      /*if(this.kifu.nodeCount === 0) this.error(\"\");\n      else if(this.kifu.propertyCount === 0)*/\n\n    },\n\n    /**\n     * Load go kifu from sgf string.\n     *\n     * @param {string} sgf\n     */\n    loadSgf: function loadSgf(sgf, path) {\n      try {\n        this.loadKifu(WGo.Kifu.fromSgf(sgf), path);\n      } catch (err) {\n        this.error(err);\n      }\n    },\n\n    /**\n     * Load go kifu from JSON object.\n     */\n    loadJSON: function loadJSON(json, path) {\n      try {\n        this.loadKifu(WGo.Kifu.fromJGO(json), path);\n      } catch (err) {\n        this.error(err);\n      }\n    },\n\n    /**\n     * Load kifu from sgf file specified with path. AJAX is used to load sgf content.\n     */\n    loadSgfFromFile: function loadSgfFromFile(file_path, game_path) {\n      var _this = this;\n\n      try {\n        loadFromUrl(file_path, function (sgf) {\n          _this.loadSgf(sgf, game_path);\n        });\n      } catch (err) {\n        this.error(err);\n      }\n    },\n\n    /**\n     * Implementation of EventTarget interface, though it's a little bit simplified.\n     * You need to save listener if you would like to remove it later.\n     *\n     * @param {string} type of listeners\n     * @param {Function} listener callback function\n     */\n    addEventListener: function addEventListener(type, listener) {\n      this.listeners[type] = this.listeners[type] || [];\n      this.listeners[type].push(listener);\n    },\n\n    /**\n     * Remove event listener previously added with addEventListener.\n     *\n     * @param {string} type of listeners\n     * @param {Function} listener function\n     */\n    removeEventListener: function removeEventListener(type, listener) {\n      if (!this.listeners[type]) return;\n      var i = this.listeners[type].indexOf(listener);\n      if (i != -1) this.listeners[type].splice(i, 1);\n    },\n\n    /**\n     * Dispatch an event. In default there are two events: \"kifuLoaded\" and \"update\"\n     *\n     * @param {string} evt event\n     */\n    dispatchEvent: function dispatchEvent(evt) {\n      if (!this.listeners[evt.type]) return;\n\n      for (var l in this.listeners[evt.type]) {\n        this.listeners[evt.type][l](evt);\n      }\n    },\n\n    /**\n     * Output function for notifications.\n    \t */\n    notification: function notification(text) {\n      if (console && text) {\n        console.log(text);\n      }\n    },\n\n    /**\n     * Output function for helps.\n    \t */\n    help: function help(text) {\n      if (console) console.log(text);\n    },\n\n    /**\n     * Output function for errors. TODO: reporting of errors - by cross domain AJAX\n     */\n    error: function error(err) {\n      if (!WGo.ERROR_REPORT) throw err;\n      if (console) console.log(err);\n    },\n\n    /**\n     * Play next move.\n     *\n     * @param {number} i if there is more option, you can specify it by index\n     */\n    next: function next(i) {\n      if (this.frozen || !this.kifu) return;\n\n      try {\n        this.kifuReader.next(i);\n        this.update();\n      } catch (err) {\n        this.error(err);\n      }\n    },\n\n    /**\n     * Get previous position.\n     */\n    previous: function previous() {\n      if (this.frozen || !this.kifu) return;\n\n      try {\n        this.kifuReader.previous();\n        this.update();\n      } catch (err) {\n        this.error(err);\n      }\n    },\n\n    /**\n     * Play all moves and get last position.\n     */\n    last: function last() {\n      if (this.frozen || !this.kifu) return;\n\n      try {\n        this.kifuReader.last();\n        this.update();\n      } catch (err) {\n        this.error(err);\n      }\n    },\n\n    /**\n     * Get a first position.\n     */\n    first: function first() {\n      if (this.frozen || !this.kifu) return;\n\n      try {\n        this.kifuReader.first();\n        this.update();\n      } catch (err) {\n        this.error(err);\n      }\n    },\n\n    /**\n     * Go to a specified move.\n     *\n     * @param {number|Array} move number of move, or path array\n     */\n    goTo: function goTo(move) {\n      if (this.frozen || !this.kifu) return;\n      var path;\n      if (typeof move == \"function\") move = move.call(this);\n\n      if (typeof move == \"number\") {\n        path = WGo.clone(this.kifuReader.path);\n        path.m = move || 0;\n      } else path = move;\n\n      try {\n        this.kifuReader.goTo(path);\n        this.update();\n      } catch (err) {\n        this.error(err);\n      }\n    },\n\n    /**\n     * Get information about actual game(kifu)\n     *\n     * @return {Object} game info\n     */\n    getGameInfo: function getGameInfo() {\n      if (!this.kifu) return null;\n      var info = {};\n\n      for (var key in this.kifu.info) {\n        if (WGo.Kifu.infoList.indexOf(key) == -1) continue;\n\n        if (WGo.Kifu.infoFormatters[key]) {\n          info[WGo.t(key)] = WGo.Kifu.infoFormatters[key](this.kifu.info[key]);\n        } else info[WGo.t(key)] = WGo.filterHTML(this.kifu.info[key]);\n      }\n\n      return info;\n    },\n\n    /**\n     * Freeze or onfreeze player. In frozen state methods: next, previous etc. don't work.\n     */\n    setFrozen: function setFrozen(frozen) {\n      this.frozen = frozen;\n      this.dispatchEvent({\n        type: this.frozen ? \"frozen\" : \"unfrozen\",\n        target: this\n      });\n    },\n\n    /**\n     * Append player to given element.\n     */\n    appendTo: function appendTo(elem) {\n      elem.appendChild(this.element);\n    },\n\n    /**\n     * Get focus on the player\n     */\n    focus: function focus() {\n      if (this.config.enableKeys) this.setKeys(true);\n    },\n\n    /**\n     * Set controlling of player by arrow keys.\n     */\n    setKeys: function setKeys(b) {\n      if (b) {\n        document.onkeydown = key_lis.bind(this);\n      } else {\n        document.onkeydown = null;\n      }\n    },\n\n    /**\n     * Set controlling of player by mouse wheel.\n     */\n    setWheel: function setWheel(b) {\n      if (!this._wheel_listener && b) {\n        this._wheel_listener = wheel_lis.bind(this);\n        var type = document.onmousewheel !== undefined ? \"mousewheel\" : \"DOMMouseScroll\";\n        this.element.addEventListener(type, this._wheel_listener);\n      } else if (this._wheel_listener && !b) {\n        var type = document.onmousewheel !== undefined ? \"mousewheel\" : \"DOMMouseScroll\";\n        this.element.removeEventListener(type, this._wheel_listener);\n        delete this._wheel_listener;\n      }\n    },\n\n    /**\n     * Toggle coordinates around the board.\n     */\n    setCoordinates: function setCoordinates(b) {\n      if (!this.coordinates && b) {\n        this.board.setSection(-0.5, -0.5, -0.5, -0.5);\n        this.board.addCustomObject(WGo.Board.coordinates);\n      } else if (this.coordinates && !b) {\n        this.board.setSection(0, 0, 0, 0);\n        this.board.removeCustomObject(WGo.Board.coordinates);\n      }\n\n      this.coordinates = b;\n    }\n  };\n  Player.default = {\n    sgf: undefined,\n    json: undefined,\n    sgfFile: undefined,\n    move: undefined,\n    board: {},\n    enableWheel: true,\n    lockScroll: true,\n    enableKeys: true,\n    rememberPath: true,\n    kifuLoaded: undefined,\n    update: undefined,\n    frozen: undefined,\n    unfrozen: undefined,\n    allowIllegalMoves: false,\n    markLastMove: true,\n    displayVariations: true\n  };\n  WGo.Player = Player; //--- i18n support ------------------------------------------------------------------------------------------\n\n  /**\n   * For another language support, extend this object with similiar object.\n   */\n\n  var player_terms = {\n    \"about-text\": \"<h1>WGo.js Player 2.0</h1>\" + \"<p>WGo.js Player is extension of WGo.js, HTML5 library for purposes of game of go. It allows to replay go game records and it has many features like score counting. It is also designed to be easily extendable.</p>\" + \"<p>WGo.js is open source licensed under <a href='http://en.wikipedia.org/wiki/MIT_License' target='_blank'>MIT license</a>. You can use and modify any code from this project.</p>\" + \"<p>You can find more information at <a href='http://wgo.waltheri.net/player' target='_blank'>wgo.waltheri.net/player</a></p>\" + \"<p>Copyright &copy; 2013 Jan Prokop</p>\",\n    \"black\": \"Black\",\n    \"white\": \"White\",\n    \"DT\": \"Date\",\n    \"KM\": \"Komi\",\n    \"HA\": \"Handicap\",\n    \"AN\": \"Annotations\",\n    \"CP\": \"Copyright\",\n    \"GC\": \"Game comments\",\n    \"GN\": \"Game name\",\n    \"ON\": \"Fuseki\",\n    \"OT\": \"Overtime\",\n    \"TM\": \"Basic time\",\n    \"RE\": \"Result\",\n    \"RO\": \"Round\",\n    \"RU\": \"Rules\",\n    \"US\": \"Recorder\",\n    \"PC\": \"Place\",\n    \"EV\": \"Event\",\n    \"SO\": \"Source\",\n    \"none\": \"none\",\n    \"bpass\": \"Black passed.\",\n    \"wpass\": \"White passed.\"\n  };\n\n  for (var key in player_terms) {\n    WGo.i18n.en[key] = player_terms[key];\n  }\n})(WGo);",{"version":3,"sources":["/Users/linchengxun/Desktop/vuego-testfunc/wgo.js-master/wgo/player.js"],"names":["WGo","FileError","path","code","name","message","prototype","Error","constructor","loadFromUrl","url","callback","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","length","open","send","err","update_board","e","change","board","update","temp_marks","removeObject","add","notification","node","move","config","markLastMove","pass","t","c","B","push","type","x","y","children","displayVariations","i","text","String","fromCharCode","theme","variationColor","markup","j","splice","concat","addObject","prepare_board","setSize","kifu","size","removeAllObjects","enableWheel","setWheel","detect_scrolling","bp","element","_wgo_scrollable","scrollHeight","offsetHeight","window","getComputedStyle","overflow","parentNode","wheel_lis","delta","wheelDelta","detail","target","next","lockScroll","preventDefault","previous","key_lis","focusedElements","document","querySelector","keyCode","board_click_default","kifuReader","Player","key","default","undefined","createElement","Board","init","initGame","listeners","kifuLoaded","bind","frozen","unfrozen","addEventListener","focus","sgf","loadSgf","json","loadJSON","sgfFile","loadSgfFromFile","op","ev","position","getPosition","dispatchEvent","loadKifu","KifuReader","rememberPath","allowIllegalMoves","goTo","Kifu","fromSgf","error","fromJGO","file_path","game_path","_this","listener","removeEventListener","indexOf","evt","l","console","log","help","ERROR_REPORT","last","first","call","clone","m","getGameInfo","info","infoList","infoFormatters","filterHTML","setFrozen","appendTo","elem","appendChild","enableKeys","setKeys","b","onkeydown","_wheel_listener","onmousewheel","setCoordinates","coordinates","setSection","addCustomObject","removeCustomObject","player_terms","i18n","en"],"mappings":"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","sourcesContent":["/* eslint-disable */\n(function(WGo){\n\n\"use strict\";\n\nvar FileError = function(path, code) {\n\tthis.name = \"FileError\";\n\n    if(code == 1) this.message = \"File '\"+path+\"' is empty.\";\n\telse if(code == 2) this.message = \"Network error. It is not possible to read '\"+path+\"'.\";\n\telse this.message = \"File '\"+path+\"' hasn't been found on server.\";\n}\n\nFileError.prototype = new Error();\nFileError.prototype.constructor = FileError;\n\nWGo.FileError = FileError;\n\n// ajax function for loading of files\nvar loadFromUrl = WGo.loadFromUrl = function(url, callback) {\n\n\tvar xmlhttp = new XMLHttpRequest();\n\txmlhttp.onreadystatechange = function() {\n\t\tif (xmlhttp.readyState == 4) {\n\t\t\tif(xmlhttp.status == 200) {\n\t\t\t\tif(xmlhttp.responseText.length == 0) {\n\t\t\t\t\tthrow new FileError(url, 1);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallback(xmlhttp.responseText);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthrow new FileError(url);\n\t\t\t}\n\t\t}\n\t}\n\n\ttry {\n\t\txmlhttp.open(\"GET\", url, true);\n\t\txmlhttp.send();\n\t}\n\tcatch(err) {\n\t\tthrow new FileError(url, 2);\n\t}\n\n}\n\n// basic updating function - handles board changes\nvar update_board = function(e) {\n\t// update board's position\n\tif(e.change) this.board.update(e.change);\n\n\t// remove old markers from the board\n\tif(this.temp_marks) this.board.removeObject(this.temp_marks);\n\n\t// init array for new objects\n\tvar add = [];\n\n\tthis.notification();\n\n\t// add current move marker\n\tif(e.node.move && this.config.markLastMove) {\n\t\tif(e.node.move.pass) this.notification(WGo.t((e.node.move.c == WGo.B ? \"b\" : \"w\")+\"pass\"));\n\t\telse add.push({\n\t\t\ttype: \"CR\",\n\t\t\tx: e.node.move.x,\n\t\t\ty: e.node.move.y\n\t\t});\n\t}\n\n\t// add variation letters\n\tif(e.node.children.length > 1 && this.config.displayVariations) {\n\t\tfor(var i = 0; i < e.node.children.length; i++) {\n\t\t\tif(e.node.children[i].move && !e.node.children[i].move.pass)\tadd.push({\n\t\t\t\ttype: \"LB\",\n\t\t\t\ttext: String.fromCharCode(65+i),\n\t\t\t\tx: e.node.children[i].move.x,\n\t\t\t\ty: e.node.children[i].move.y,\n\t\t\t\tc: this.board.theme.variationColor || \"rgba(0,32,128,0.8)\"\n\t\t\t});\n\t\t}\n\t}\n\n\t// add other markup\n\tif(e.node.markup) {\n\t\tfor(var i in e.node.markup) {\n\t\t\tfor(var j = 0; j < add.length; j++) {\n\t\t\t\tif(e.node.markup[i].x == add[j].x && e.node.markup[i].y == add[j].y) {\n\t\t\t\t\tadd.splice(j,1);\n\t\t\t\t\tj--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tadd = add.concat(e.node.markup);\n\t}\n\n\t// add new markers on the board\n\tthis.temp_marks = add;\n\tthis.board.addObject(add);\n}\n\n// preparing board\nvar prepare_board = function(e) {\n\t// set board size\n\tthis.board.setSize(e.kifu.size);\n\n\t// remove old objects\n\tthis.board.removeAllObjects();\n\n\t// activate wheel\n\tif(this.config.enableWheel) this.setWheel(true);\n}\n\n// detecting scrolling of element - e.g. when we are scrolling text in comment box, we want to be aware.\nvar detect_scrolling = function(node, bp) {\n\tif(node == bp.element || node == bp.element) return false;\n\telse if(node._wgo_scrollable || (node.scrollHeight > node.offsetHeight && window.getComputedStyle(node).overflow == \"auto\")) return true;\n\telse return detect_scrolling(node.parentNode, bp);\n}\n\n// mouse wheel event callback, for replaying a game\nvar wheel_lis = function(e) {\n\tvar delta = e.wheelDelta || e.detail*(-1);\n\n\t// if there is scrolling in progress within an element, don't change position\n\tif(detect_scrolling(e.target, this)) return true;\n\n\tif(delta < 0) {\n\t\tthis.next();\n\t\tif(this.config.lockScroll && e.preventDefault) e.preventDefault();\n\t\treturn !this.config.lockScroll;\n\t}\n\telse if(delta > 0) {\n\t\tthis.previous();\n\t\tif(this.config.lockScroll && e.preventDefault) e.preventDefault();\n\t\treturn !this.config.lockScroll;\n\t}\n\treturn true;\n};\n\n// keyboard click callback, for replaying a game\nvar key_lis = function(e) {\n\t// disable game replay, when there is focus on some form text field\n\tvar focusedElements = document.querySelector(\"input:focus, textarea:focus\");\n\tif(focusedElements) return true;\n\t\n\tswitch(e.keyCode){\n\t\tcase 39: this.next(); break;\n\t\tcase 37: this.previous(); break;\n\t\t//case 40: this.selectAlternativeVariation(); break;\n\t\tdefault: return true;\n\t}\n\tif(this.config.lockScroll && e.preventDefault) e.preventDefault()\n\treturn !this.config.lockScroll;\n};\n\n// function handling board clicks in normal mode\nvar board_click_default = function(x,y) {\n\tif(!this.kifuReader || !this.kifuReader.node) return false;\n\tfor(var i in this.kifuReader.node.children) {\n\t\tif(this.kifuReader.node.children[i].move && this.kifuReader.node.children[i].move.x == x && this.kifuReader.node.children[i].move.y == y) {\n\t\t\tthis.next(i);\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n// coordinates drawing handler - adds coordinates on the board\n/*var coordinates = {\n\tgrid: {\n\t\tdraw: function(args, board) {\n\t\t\tvar ch, t, xright, xleft, ytop, ybottom;\n\n\t\t\tthis.fillStyle = \"rgba(0,0,0,0.7)\";\n\t\t\tthis.textBaseline=\"middle\";\n\t\t\tthis.textAlign=\"center\";\n\t\t\tthis.font = board.stoneRadius+\"px \"+(board.font || \"\");\n\n\t\t\txright = board.getX(-0.75);\n\t\t\txleft = board.getX(board.size-0.25);\n\t\t\tytop = board.getY(-0.75);\n\t\t\tybottom = board.getY(board.size-0.25);\n\n\t\t\tfor(var i = 0; i < board.size; i++) {\n\t\t\t\tch = i+\"A\".charCodeAt(0);\n\t\t\t\tif(ch >= \"I\".charCodeAt(0)) ch++;\n\n\t\t\t\tt = board.getY(i);\n\t\t\t\tthis.fillText(board.size-i, xright, t);\n\t\t\t\tthis.fillText(board.size-i, xleft, t);\n\n\t\t\t\tt = board.getX(i);\n\t\t\t\tthis.fillText(String.fromCharCode(ch), t, ytop);\n\t\t\t\tthis.fillText(String.fromCharCode(ch), t, ybottom);\n\t\t\t}\n\n\t\t\tthis.fillStyle = \"black\";\n\t\t}\n\t}\n}*/\n\n/**\n * We can say this class is abstract, stand alone it doesn't do anything.\n * However it is useful skelet for building actual player's GUI. Extend this class to create custom player template.\n * It controls board and inputs from mouse and keyboard, but everything can be overriden.\n *\n * Possible configurations:\n *  - sgf: sgf string (default: undefined)\n *  - json: kifu stored in json/jgo (default: undefined)\n *  - sgfFile: sgf file path (default: undefined)\n *  - board: configuration object of board (default: {})\n *  - enableWheel: allow player to be controlled by mouse wheel (default: true)\n *  - lockScroll: disable window scrolling while hovering player (default: true),\n *  - enableKeys: allow player to be controlled by arrow keys (default: true),\n *  - markLastMove: marks the last move with a circle (default: true),\n *\n * @param {object} config object if form: {key1: value1, key2: value2, ...}\n */\n\nvar Player = function(config) {\n\tthis.config = config;\n\n\t// add default configuration\n\tfor(var key in Player.default) if(this.config[key] === undefined && Player.default[key] !== undefined) this.config[key] = Player.default[key];\n\n\tthis.element = document.createElement(\"div\");\n\tthis.board = new WGo.Board(this.element, this.config.board);\n\n\tthis.init();\n\tthis.initGame();\n}\n\nPlayer.prototype = {\n\tconstructor: Player,\n\n\t/**\n\t * Init player. If you want to call this method PlayerView object must have these properties:\n\t *  - player - WGo.Player object\n\t *  - board - WGo.Board object (or other board renderer)\n\t *  - element - main DOMElement of player\n\t */\n\n\tinit: function() {\n\t\t// declare kifu\n\t\tthis.kifu = null;\n\n\t\t// creating listeners\n\t\tthis.listeners = {\n\t\t\tkifuLoaded: [prepare_board.bind(this)],\n\t\t\tupdate: [update_board.bind(this)],\n\t\t\tfrozen: [],\n\t\t\tunfrozen: [],\n\t\t};\n\n\t\tif(this.config.kifuLoaded) this.addEventListener(\"kifuLoaded\", this.config.kifuLoaded);\n\t\tif(this.config.update) this.addEventListener(\"update\", this.config.update);\n\t\tif(this.config.frozen) this.addEventListener(\"frozen\", this.config.frozen);\n\t\tif(this.config.unfrozen) this.addEventListener(\"unfrozen\", this.config.unfrozen);\n\n\t\tthis.board.addEventListener(\"click\", board_click_default.bind(this));\n\t\tthis.element.addEventListener(\"click\", this.focus.bind(this));\n\n\t\tthis.focus();\n\t},\n\n\tinitGame: function() {\n\t\t// try to load game passed in configuration\n\t\tif(this.config.sgf) {\n\t\t\tthis.loadSgf(this.config.sgf, this.config.move);\n\t\t}\n\t\telse if(this.config.json) {\n\t\t\tthis.loadJSON(this.config.json, this.config.move);\n\t\t}\n\t\telse if(this.config.sgfFile) {\n\t\t\tthis.loadSgfFromFile(this.config.sgfFile, this.config.move);\n\t\t}\n\n\t},\n\n\t/**\n\t * Create update event and dispatch it. It is called after position's changed.\n\t *\n\t * @param {string} op an operation that produced update (e.g. next, previous...)\n\t */\n\n\tupdate: function(op) {\n\t\tif(!this.kifuReader || !this.kifuReader.change) return;\n\n\t\tvar ev = {\n\t\t\ttype: \"update\",\n\t\t\top: op,\n\t\t\ttarget: this,\n\t\t\tnode: this.kifuReader.node,\n\t\t\tposition: this.kifuReader.getPosition(),\n\t\t\tpath: this.kifuReader.path,\n\t\t\tchange: this.kifuReader.change,\n\t\t}\n\n\t\t//if(!this.kifuReader.node.parent) ev.msg = this.getGameInfo();\n\n\t\tthis.dispatchEvent(ev);\n\t},\n\n\t/**\n\t * Prepare kifu for replaying. Event 'kifuLoaded' is triggered.\n\t *\n\t * @param {WGo.Kifu} kifu object\n\t * @param {Array} path array\n\t */\n\n\tloadKifu: function(kifu, path) {\n\t\tthis.kifu = kifu;\n\n\t\t// kifu is replayed by KifuReader, it manipulates a Kifu object and gets all changes\n\t\tthis.kifuReader = new WGo.KifuReader(this.kifu, this.config.rememberPath, this.config.allowIllegalMoves);\n\n\t\t// fire kifu loaded event\n\t\tthis.dispatchEvent({\n\t\t\ttype: \"kifuLoaded\",\n\t\t\ttarget: this,\n\t\t\tkifu: this.kifu,\n\t\t});\n\n\t\t// handle permalink\n\t\t/*if(this.config.permalinks) {\n\t\t\tif(!permalinks.active) init_permalinks();\n\t\t\tif(permalinks.query.length && permalinks.query[0] == this.view.element.id) {\n\t\t\t\thandle_hash(this);\n\t\t\t}\n\t\t}*/\n\n\t\t// update player - initial position in kifu doesn't have to be an empty board\n\t\tthis.update(\"init\");\n\n\t\tif(path) {\n\t\t\tthis.goTo(path);\n\t\t}\n\n\t\t/*if(this.kifu.nodeCount === 0) this.error(\"\");\n\t\telse if(this.kifu.propertyCount === 0)*/\n\n\t},\n\n\t/**\n\t * Load go kifu from sgf string.\n\t *\n\t * @param {string} sgf\n\t */\n\n\tloadSgf: function(sgf, path) {\n\t\ttry {\n\t\t\tthis.loadKifu(WGo.Kifu.fromSgf(sgf), path);\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.error(err);\n\t\t}\n\t},\n\n\t/**\n\t * Load go kifu from JSON object.\n\t */\n\n\tloadJSON: function(json, path) {\n\t\ttry {\n\t\t\tthis.loadKifu(WGo.Kifu.fromJGO(json), path);\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.error(err);\n\t\t}\n\t},\n\n\t/**\n\t * Load kifu from sgf file specified with path. AJAX is used to load sgf content.\n\t */\n\n\tloadSgfFromFile: function(file_path, game_path) {\n\t\tvar _this = this;\n\t\ttry {\n\t\t\tloadFromUrl(file_path, function(sgf) {\n\t\t\t\t_this.loadSgf(sgf, game_path);\n\t\t\t});\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.error(err);\n\t\t}\n\t},\n\n\t/**\n\t * Implementation of EventTarget interface, though it's a little bit simplified.\n\t * You need to save listener if you would like to remove it later.\n\t *\n\t * @param {string} type of listeners\n\t * @param {Function} listener callback function\n\t */\n\n\taddEventListener: function(type, listener) {\n\t\tthis.listeners[type] = this.listeners[type] || [];\n\t\tthis.listeners[type].push(listener);\n\t},\n\n\t/**\n\t * Remove event listener previously added with addEventListener.\n\t *\n\t * @param {string} type of listeners\n\t * @param {Function} listener function\n\t */\n\n\tremoveEventListener: function(type, listener) {\n\t\tif(!this.listeners[type]) return;\n\t\tvar i = this.listeners[type].indexOf(listener);\n\t\tif(i != -1) this.listeners[type].splice(i,1);\n\t},\n\n\t/**\n\t * Dispatch an event. In default there are two events: \"kifuLoaded\" and \"update\"\n\t *\n\t * @param {string} evt event\n\t */\n\n\tdispatchEvent: function(evt) {\n\t\tif(!this.listeners[evt.type]) return;\n\t\tfor(var l in this.listeners[evt.type]) this.listeners[evt.type][l](evt);\n\t},\n\n\t/**\n\t * Output function for notifications.\n \t */\n\n\tnotification: function(text) {\n\t\tif (console && text) {\n\t\t\tconsole.log(text);\n\t\t}\n\t},\n\n\t/**\n\t * Output function for helps.\n \t */\n\n\thelp: function(text) {\n\t\tif(console) console.log(text);\n\t},\n\n\t/**\n\t * Output function for errors. TODO: reporting of errors - by cross domain AJAX\n\t */\n\n\terror: function(err) {\n\t\tif(!WGo.ERROR_REPORT) throw err;\n\n\t\tif(console) console.log(err);\n\n\t},\n\n\t/**\n\t * Play next move.\n\t *\n\t * @param {number} i if there is more option, you can specify it by index\n\t */\n\n\tnext: function(i) {\n\t\tif(this.frozen || !this.kifu) return;\n\n\t\ttry {\n\t\t\tthis.kifuReader.next(i);\n\t\t\tthis.update();\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.error(err);\n\t\t}\n\t},\n\n\t/**\n\t * Get previous position.\n\t */\n\n\tprevious: function() {\n\t\tif(this.frozen || !this.kifu) return;\n\n\t\ttry{\n\t\t\tthis.kifuReader.previous();\n\t\t\tthis.update();\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.error(err);\n\t\t}\n\t},\n\n\t/**\n\t * Play all moves and get last position.\n\t */\n\n\tlast: function() {\n\t\tif(this.frozen || !this.kifu) return;\n\n\t\ttry {\n\t\t\tthis.kifuReader.last();\n\t\t\tthis.update();\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.error(err);\n\t\t}\n\t},\n\n\t/**\n\t * Get a first position.\n\t */\n\n\tfirst: function() {\n\t\tif(this.frozen || !this.kifu) return;\n\n\t\ttry {\n\t\t\tthis.kifuReader.first();\n\t\t\tthis.update();\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.error(err);\n\t\t}\n\t},\n\n\t/**\n\t * Go to a specified move.\n\t *\n\t * @param {number|Array} move number of move, or path array\n\t */\n\n\tgoTo: function(move) {\n\t\tif(this.frozen || !this.kifu) return;\n\t\tvar path;\n\t\tif(typeof move == \"function\") move = move.call(this);\n\n\t\tif(typeof move == \"number\") {\n\t\t\tpath = WGo.clone(this.kifuReader.path);\n\t\t\tpath.m = move || 0;\n\t\t}\n\t\telse path = move;\n\n\t\ttry {\n\t\t\tthis.kifuReader.goTo(path);\n\t\t\tthis.update();\n\t\t}\n\t\tcatch(err) {\n\t\t\tthis.error(err);\n\t\t}\n\t},\n\n\t/**\n\t * Get information about actual game(kifu)\n\t *\n\t * @return {Object} game info\n\t */\n\n\tgetGameInfo: function() {\n\t\tif(!this.kifu) return null;\n\t\tvar info = {};\n\t\tfor(var key in this.kifu.info) {\n\t\t\tif(WGo.Kifu.infoList.indexOf(key) == -1) continue;\n\t\t\tif(WGo.Kifu.infoFormatters[key]) {\n\t\t\t\tinfo[WGo.t(key)] = WGo.Kifu.infoFormatters[key](this.kifu.info[key]);\n\t\t\t}\n\t\t\telse info[WGo.t(key)] = WGo.filterHTML(this.kifu.info[key]);\n\t\t}\n\t\treturn info;\n\t},\n\n\t/**\n\t * Freeze or onfreeze player. In frozen state methods: next, previous etc. don't work.\n\t */\n\n\tsetFrozen: function(frozen) {\n\t\tthis.frozen = frozen;\n\t\tthis.dispatchEvent({\n\t\t\ttype: this.frozen ? \"frozen\" : \"unfrozen\",\n\t\t\ttarget: this,\n\t\t});\n\t},\n\n\t/**\n\t * Append player to given element.\n\t */\n\n\tappendTo: function(elem) {\n\t\telem.appendChild(this.element);\n\t},\n\n\t/**\n\t * Get focus on the player\n\t */\n\n\tfocus: function() {\n\t\tif(this.config.enableKeys) this.setKeys(true);\n\t},\n\n\t/**\n\t * Set controlling of player by arrow keys.\n\t */\n\n\tsetKeys: function(b) {\n\t\tif(b) {\n\t\t\tdocument.onkeydown = key_lis.bind(this);\n\t\t}\n\t\telse {\n\t\t\tdocument.onkeydown = null;\n\t\t}\n\t},\n\n\t/**\n\t * Set controlling of player by mouse wheel.\n\t */\n\n\tsetWheel: function(b) {\n\t\tif(!this._wheel_listener && b) {\n\t\t\tthis._wheel_listener = wheel_lis.bind(this);\n\t\t\tvar type = (document.onmousewheel !== undefined) ? \"mousewheel\" : \"DOMMouseScroll\";\n\t\t\tthis.element.addEventListener(type, this._wheel_listener);\n\t\t}\n\t\telse if(this._wheel_listener && !b) {\n\t\t\tvar type = (document.onmousewheel !== undefined) ? \"mousewheel\" : \"DOMMouseScroll\";\n\t\t\tthis.element.removeEventListener(type, this._wheel_listener);\n\t\t\tdelete this._wheel_listener;\n\t\t}\n\t},\n\n\t/**\n\t * Toggle coordinates around the board.\n\t */\n\n\tsetCoordinates: function(b) {\n\t\tif(!this.coordinates && b) {\n\t\t\tthis.board.setSection(-0.5, -0.5, -0.5, -0.5);\n\t\t\tthis.board.addCustomObject(WGo.Board.coordinates);\n\t\t}\n\t\telse if(this.coordinates && !b) {\n\t\t\tthis.board.setSection(0, 0, 0, 0);\n\t\t\tthis.board.removeCustomObject(WGo.Board.coordinates);\n\t\t}\n\t\tthis.coordinates = b;\n\t},\n\n}\n\nPlayer.default = {\n\tsgf: undefined,\n\tjson: undefined,\n\tsgfFile: undefined,\n\tmove: undefined,\n\tboard: {},\n\tenableWheel: true,\n\tlockScroll: true,\n\tenableKeys: true,\n\trememberPath: true,\n\tkifuLoaded: undefined,\n\tupdate: undefined,\n\tfrozen: undefined,\n\tunfrozen: undefined,\n\tallowIllegalMoves: false,\n\tmarkLastMove: true,\n\tdisplayVariations: true\n}\n\nWGo.Player = Player;\n\n//--- i18n support ------------------------------------------------------------------------------------------\n\n/**\n * For another language support, extend this object with similiar object.\n */\n\nvar player_terms = {\n\t\"about-text\": \"<h1>WGo.js Player 2.0</h1>\"\n\t\t\t\t+ \"<p>WGo.js Player is extension of WGo.js, HTML5 library for purposes of game of go. It allows to replay go game records and it has many features like score counting. It is also designed to be easily extendable.</p>\"\n\t\t\t\t+ \"<p>WGo.js is open source licensed under <a href='http://en.wikipedia.org/wiki/MIT_License' target='_blank'>MIT license</a>. You can use and modify any code from this project.</p>\"\n\t\t\t\t+ \"<p>You can find more information at <a href='http://wgo.waltheri.net/player' target='_blank'>wgo.waltheri.net/player</a></p>\"\n\t\t\t\t+ \"<p>Copyright &copy; 2013 Jan Prokop</p>\",\n\t\"black\": \"Black\",\n\t\"white\": \"White\",\n\t\"DT\": \"Date\",\n\t\"KM\": \"Komi\",\n\t\"HA\": \"Handicap\",\n\t\"AN\": \"Annotations\",\n\t\"CP\": \"Copyright\",\n\t\"GC\": \"Game comments\",\n\t\"GN\": \"Game name\",\n\t\"ON\": \"Fuseki\",\n\t\"OT\": \"Overtime\",\n\t\"TM\": \"Basic time\",\n\t\"RE\": \"Result\",\n\t\"RO\": \"Round\",\n\t\"RU\": \"Rules\",\n\t\"US\": \"Recorder\",\n\t\"PC\": \"Place\",\n\t\"EV\": \"Event\",\n\t\"SO\": \"Source\",\n\t\"none\": \"none\",\n\t\"bpass\": \"Black passed.\",\n\t\"wpass\": \"White passed.\",\n};\n\nfor(var key in player_terms) WGo.i18n.en[key] = player_terms[key];\n\n})(WGo);\n"]}]}