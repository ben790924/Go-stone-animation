{"remainingRequest":"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/babel-loader/lib/index.js!/Users/linchengxun/Desktop/vuego-testfunc/node_modules/eslint-loader/index.js??ref--13-0!/Users/linchengxun/Desktop/vuego-testfunc/wgo.js-master/wgo/basicplayer.js","dependencies":[{"path":"/Users/linchengxun/Desktop/vuego-testfunc/wgo.js-master/wgo/basicplayer.js","mtime":1552470002146},{"path":"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _parseInt from \"/Users/linchengxun/Desktop/vuego-testfunc/node_modules/@babel/runtime-corejs2/core-js/parse-int\";\n\n/* eslint-disable */\n(function (WGo) {\n  \"use strict\"; // player counter - for creating unique ids\n\n  var pl_count = 0; // generate DOM of region\n\n  var playerBlock = function playerBlock(name, parent, visible) {\n    var e = {};\n    e.element = document.createElement(\"div\");\n    e.element.className = \"wgo-player-\" + name;\n    e.wrapper = document.createElement(\"div\");\n    e.wrapper.className = \"wgo-player-\" + name + \"-wrapper\";\n    e.element.appendChild(e.wrapper);\n    parent.appendChild(e.element);\n    if (!visible) e.element.style.display = \"none\";\n    return e;\n  }; // generate all DOM of player\n\n\n  var BPgenerateDom = function BPgenerateDom() {\n    // wrapper object for common DOM\n    this.dom = {}; // center element\n\n    this.dom.center = document.createElement(\"div\");\n    this.dom.center.className = \"wgo-player-center\"; // board wrapper element\n\n    this.dom.board = document.createElement(\"div\");\n    this.dom.board.className = \"wgo-player-board\"; // object wrapper for regions (left, right, top, bottom)\n\n    this.regions = {};\n    /*\n    pseudo DOM structure:\n    <main>\n    \t<left></left>\n    \t<center>\n    \t\t<top></top>\n    \t\t<board></board>\n    \t\t<bottom></bottom>\n    \t</center>\n    \t<right></right>\n    </main>\n    */\n\n    this.regions.left = playerBlock(\"left\", this.element);\n    this.element.appendChild(this.dom.center);\n    this.regions.right = playerBlock(\"right\", this.element);\n    this.regions.top = playerBlock(\"top\", this.dom.center);\n    this.dom.center.appendChild(this.dom.board);\n    this.regions.bottom = playerBlock(\"bottom\", this.dom.center);\n  };\n\n  var getCurrentLayout = function getCurrentLayout() {\n    var cl = this.config.layout;\n    if (cl.constructor != Array) return cl;\n    var bh = this.height || this.maxHeight;\n\n    for (var i = 0; i < cl.length; i++) {\n      if (!cl[i].conditions || (!cl[i].conditions.minWidth || cl[i].conditions.minWidth <= this.width) && (!cl[i].conditions.minHeight || !bh || cl[i].conditions.minHeight <= bh) && (!cl[i].conditions.maxWidth || cl[i].conditions.maxWidth >= this.width) && (!cl[i].conditions.maxHeight || !bh || cl[i].conditions.maxHeight >= bh) && (!cl[i].conditions.custom || cl[i].conditions.custom.call(this))) {\n        return cl[i];\n      }\n    }\n  };\n\n  var appendComponents = function appendComponents(area) {\n    var components;\n    if (this.currentLayout.layout) components = this.currentLayout.layout[area];else components = this.currentLayout[area];\n\n    if (components) {\n      this.regions[area].element.style.display = \"block\";\n      if (components.constructor != Array) components = [components];\n\n      for (var i in components) {\n        if (!this.components[components[i]]) this.components[components[i]] = new BasicPlayer.component[components[i]](this);\n        this.components[components[i]].appendTo(this.regions[area].wrapper); // remove detach flag\n\n        this.components[components[i]]._detachFromPlayer = false;\n      }\n    } else {\n      this.regions[area].element.style.display = \"none\";\n    }\n  };\n\n  var manageComponents = function manageComponents() {\n    // add detach flags to every widget\n    for (var key in this.components) {\n      this.components[key]._detachFromPlayer = true;\n    }\n\n    appendComponents.call(this, \"left\");\n    appendComponents.call(this, \"right\");\n    appendComponents.call(this, \"top\");\n    appendComponents.call(this, \"bottom\"); // detach all invisible components\n\n    for (var key in this.components) {\n      if (this.components[key]._detachFromPlayer && this.components[key].element.parentNode) this.components[key].element.parentNode.removeChild(this.components[key].element);\n    }\n  };\n  /**\n   * Main object of player, it binds all magic together and produces visible player.\n   * It inherits some functionality from WGo.Player, but full html structure is done here.\n   *\n   * Layout of player can be set. It can be even dynamic according to screen resolution. \n   * There are 5 areas - left, right, top and bottom, and there is special region for board.\n   * You can put BasicPlayer.Component objects to these regions. Basic components are: \n   *  - BasicPlayer.CommentBox - box with comments and game informations\n   *  - BasicPlayer.InfoBox - box with information about players\n   *  - BasicPlayer.Control - buttons and staff for control\n   *\n   * Possible configurations:\n   *  - sgf: sgf string (default: undefined)\n   *  - json: kifu stored in json/jgo (default: undefined)\n   *  - sgfFile: sgf file path (default: undefined)\n   *  - board: configuration object of board (default: {})\n   *  - enableWheel: allow player to be controlled by mouse wheel (default: true)\n   *  - lockScroll: disable window scrolling while hovering player (default: true)\n   *  - enableKeys: allow player to be controlled by arrow keys (default: true)\n   *  - kifuLoaded: extra Player's kifuLoaded event listener (default: undefined)\n   *  - update: extra Player's update event listener (default: undefined)\n   *  - frozen: extra Player's frozen event listener (default: undefined)\n   *  - unfrozen: extra Player's unfrozen event listener (default: undefined)\n   *  - layout: layout object. Look below how to define your own layout (default: BasicPlayer.dynamicLayout)\n   *\n   * You also must specify main DOMElement of player. \n   */\n\n\n  var BasicPlayer = WGo.extendClass(WGo.Player, function (elem, config) {\n    this.config = config; // add default configuration of BasicPlayer\n\n    for (var key in BasicPlayer.default) {\n      if (this.config[key] === undefined && BasicPlayer.default[key] !== undefined) this.config[key] = BasicPlayer.default[key];\n    } // add default configuration of Player class\n\n\n    for (var key in WGo.Player.default) {\n      if (this.config[key] === undefined && WGo.Player.default[key] !== undefined) this.config[key] = WGo.Player.default[key];\n    }\n\n    this.element = elem;\n    this.element.innerHTML = \"\";\n    this.classes = (this.element.className ? this.element.className + \" \" : \"\") + \"wgo-player-main\";\n    this.element.className = this.classes;\n    if (!this.element.id) this.element.id = \"wgo_\" + pl_count++;\n    BPgenerateDom.call(this);\n    this.board = new WGo.Board(this.dom.board, this.config.board);\n    this.init();\n    this.components = {};\n    window.addEventListener(\"resize\", function () {\n      if (!this.noresize) {\n        this.updateDimensions();\n      }\n    }.bind(this));\n    this.updateDimensions();\n    this.initGame();\n  });\n  /**\n   * Append player to different element.\n   */\n\n  BasicPlayer.prototype.appendTo = function (elem) {\n    elem.appendChild(this.element);\n    this.updateDimensions();\n  };\n  /**\n   * Set right dimensions of all elements.\n   */\n\n\n  BasicPlayer.prototype.updateDimensions = function () {\n    var css = window.getComputedStyle(this.element);\n    var els = [];\n\n    while (this.element.firstChild) {\n      els.push(this.element.firstChild);\n      this.element.removeChild(this.element.firstChild);\n    }\n\n    var tmp_w = _parseInt(css.width);\n\n    var tmp_h = _parseInt(css.height);\n\n    var tmp_mh = _parseInt(css.maxHeight) || 0;\n\n    for (var i = 0; i < els.length; i++) {\n      this.element.appendChild(els[i]);\n    }\n\n    if (tmp_w == this.width && tmp_h == this.height && tmp_mh == this.maxHeight) return;\n    this.width = tmp_w;\n    this.height = tmp_h;\n    this.maxHeight = tmp_mh;\n    this.currentLayout = getCurrentLayout.call(this);\n\n    if (this.currentLayout && this.lastLayout != this.currentLayout) {\n      if (this.currentLayout.className) this.element.className = this.classes + \" \" + this.currentLayout.className;else this.element.className = this.classes;\n      manageComponents.call(this);\n      this.lastLayout = this.currentLayout;\n    } //var bw = this.width - this.regions.left.element.clientWidth - this.regions.right.element.clientWidth;\n\n\n    var bw = this.dom.board.clientWidth;\n    var bh = this.height || this.maxHeight;\n\n    if (bh) {\n      bh -= this.regions.top.element.offsetHeight + this.regions.bottom.element.offsetHeight;\n    }\n\n    if (bh && bh < bw) {\n      if (bh != this.board.height) this.board.setHeight(bh);\n    } else {\n      if (bw != this.board.width) this.board.setWidth(bw);\n    }\n\n    var diff = bh - bw;\n\n    if (diff > 0) {\n      this.dom.board.style.height = bh + \"px\";\n      this.dom.board.style.paddingTop = diff / 2 + \"px\";\n    } else {\n      this.dom.board.style.height = \"auto\";\n      this.dom.board.style.paddingTop = \"0\";\n    }\n\n    this.regions.left.element.style.height = this.dom.center.offsetHeight + \"px\";\n    this.regions.right.element.style.height = this.dom.center.offsetHeight + \"px\";\n\n    for (var i in this.components) {\n      if (this.components[i].updateDimensions) this.components[i].updateDimensions();\n    }\n  };\n  /**\n   * Layout contains built-in info box, for displaying of text(html) messages.\n   * You can use this method to display a message.\n   * \n   * @param text or html to display\n   * @param closeCallback optional callback function which is called when message is closed\n   */\n\n\n  BasicPlayer.prototype.showMessage = function (text, closeCallback, permanent) {\n    this.info_overlay = document.createElement(\"div\");\n    this.info_overlay.style.width = this.element.offsetWidth + \"px\";\n    this.info_overlay.style.height = this.element.offsetHeight + \"px\";\n    this.info_overlay.className = \"wgo-info-overlay\";\n    this.element.appendChild(this.info_overlay);\n    var info_message = document.createElement(\"div\");\n    info_message.className = \"wgo-info-message\";\n    info_message.innerHTML = text;\n    var close_info = document.createElement(\"div\");\n    close_info.className = \"wgo-info-close\";\n    if (!permanent) close_info.innerHTML = WGo.t(\"BP:closemsg\");\n    info_message.appendChild(close_info);\n    this.info_overlay.appendChild(info_message);\n\n    if (closeCallback) {\n      this.info_overlay.addEventListener(\"click\", function (e) {\n        closeCallback(e);\n      });\n    } else if (!permanent) {\n      this.info_overlay.addEventListener(\"click\", function (e) {\n        this.hideMessage();\n      }.bind(this));\n    }\n\n    this.setFrozen(true);\n  };\n  /**\n   * Hide a message box.\n   */\n\n\n  BasicPlayer.prototype.hideMessage = function () {\n    this.element.removeChild(this.info_overlay);\n    this.setFrozen(false);\n  };\n  /**\n   * Error handling\n   */\n\n\n  BasicPlayer.prototype.error = function (err) {\n    if (!WGo.ERROR_REPORT) throw err;\n    var url = \"#\";\n\n    switch (err.name) {\n      case \"InvalidMoveError\":\n        this.showMessage(\"<h1>\" + err.name + \"</h1><p>\" + err.message + \"</p><p>If this message isn't correct, please report it by clicking <a href=\\\"\" + url + \"\\\">here</a>, otherwise contact maintainer of this site.</p>\");\n        break;\n\n      case \"FileError\":\n        this.showMessage(\"<h1>\" + err.name + \"</h1><p>\" + err.message + \"</p><p>Please contact maintainer of this site. Note: it is possible to read files only from this host.</p>\");\n        break;\n\n      default:\n        this.showMessage(\"<h1>\" + err.name + \"</h1><p>\" + err.message + \"</p><pre>\" + err.stacktrace + \"</pre><p>Please contact maintainer of this site. You can also report it <a href=\\\"\" + url + \"\\\">here</a>.</p>\");\n    }\n  };\n\n  BasicPlayer.component = {};\n  /**\n   * Preset layouts\n   * They have defined regions as arrays, which can contain components. For each of these layouts each component specifies where it is placed.\n   * You can create your own layout in same manners, but you must specify components manually.\n   */\n\n  BasicPlayer.layouts = {\n    \"one_column\": {\n      top: [],\n      bottom: []\n    },\n    \"no_comment\": {\n      top: [],\n      bottom: []\n    },\n    \"right_top\": {\n      top: [],\n      right: []\n    },\n    \"right\": {\n      right: []\n    },\n    \"minimal\": {\n      bottom: []\n    }\n  };\n  /**\n   * WGo player can have more layouts. It allows responsive design of the player.\n   * Possible layouts are defined as array of object with this structure:\n   * \n   * layout = {\n   *   Object layout, // layout as specified above\n   *   Object conditions, // conditions that has to be valid to apply this layout\n   *   String className // custom classnames\n   * }\n   *\n   * possible conditions:\n   *  - minWidth - minimal width of player in px\n   *  - maxWidth - maximal width of player in px\n   *  - minHeight - minimal height of player in px\n   *  - maxHeight - maximal height of player in px\n   *  - custom - function which is called in template context, must return true or false\n   *\n   * Player's template evaluates layouts step by step and first layout that matches the conditions is applied.\n   *\n   * Look below at the default dynamic layout. Layouts are tested after every window resize.\n   */\n\n  BasicPlayer.dynamicLayout = [{\n    conditions: {\n      minWidth: 650\n    },\n    layout: BasicPlayer.layouts[\"right_top\"],\n    className: \"wgo-twocols wgo-large\"\n  }, {\n    conditions: {\n      minWidth: 550,\n      minHeight: 600\n    },\n    layout: BasicPlayer.layouts[\"one_column\"],\n    className: \"wgo-medium\"\n  }, {\n    conditions: {\n      minWidth: 350\n    },\n    layout: BasicPlayer.layouts[\"no_comment\"],\n    className: \"wgo-small\"\n  }, {\n    // if conditions object is omitted, layout is applied \n    layout: BasicPlayer.layouts[\"no_comment\"],\n    className: \"wgo-xsmall\"\n  }]; // default settings, they are merged with user settings in constructor.\n\n  BasicPlayer.default = {\n    layout: BasicPlayer.dynamicLayout\n  };\n  WGo.i18n.en[\"BP:closemsg\"] = \"click anywhere to close this window\"; //--- Handling <div> with HTML5 data attributes -----------------------------------------------------------------\n\n  BasicPlayer.attributes = {\n    \"data-wgo\": function dataWgo(value) {\n      if (value) {\n        if (value[0] == \"(\") this.sgf = value;else this.sgfFile = value;\n      }\n    },\n    \"data-wgo-board\": function dataWgoBoard(value) {\n      // using eval to parse strings like \"stoneStyle: 'painted'\"\n      this.board = eval(\"({\" + value + \"})\");\n    },\n    \"data-wgo-onkifuload\": function dataWgoOnkifuload(value) {\n      this.kifuLoaded = new Function(value);\n    },\n    \"data-wgo-onupdate\": function dataWgoOnupdate(value) {\n      this.update = new Function(value);\n    },\n    \"data-wgo-onfrozen\": function dataWgoOnfrozen(value) {\n      this.frozen = new Function(value);\n    },\n    \"data-wgo-onunfrozen\": function dataWgoOnunfrozen(value) {\n      this.unfrozen = new Function(value);\n    },\n    \"data-wgo-layout\": function dataWgoLayout(value) {\n      this.layout = eval(\"({\" + value + \"})\");\n    },\n    \"data-wgo-enablewheel\": function dataWgoEnablewheel(value) {\n      if (value.toLowerCase() == \"false\") this.enableWheel = false;\n    },\n    \"data-wgo-lockscroll\": function dataWgoLockscroll(value) {\n      if (value.toLowerCase() == \"false\") this.lockScroll = false;\n    },\n    \"data-wgo-enablekeys\": function dataWgoEnablekeys(value) {\n      if (value.toLowerCase() == \"false\") this.enableKeys = false;\n    },\n    \"data-wgo-rememberpath\": function dataWgoRememberpath(value) {\n      if (value.toLowerCase() == \"false\") this.rememberPath = false;\n    },\n    \"data-wgo-allowillegal\": function dataWgoAllowillegal(value) {\n      if (value.toLowerCase() != \"false\") this.allowIllegalMoves = true;\n    },\n    \"data-wgo-move\": function dataWgoMove(value) {\n      var m = _parseInt(value);\n\n      if (!isNaN(m)) this.move = m;else this.move = eval(\"({\" + value + \"})\");\n    },\n    \"data-wgo-marklastmove\": function dataWgoMarklastmove(value) {\n      if (value.toLowerCase() == \"false\") this.markLastMove = false;\n    },\n    \"data-wgo-diagram\": function dataWgoDiagram(value) {\n      if (value) {\n        if (value[0] == \"(\") this.sgf = value;else this.sgfFile = value;\n        this.markLastMove = false;\n        this.enableKeys = false;\n        this.enableWheel = false;\n        this.layout = {\n          top: [],\n          right: [],\n          left: [],\n          bottom: []\n        };\n      }\n    }\n  };\n\n  var player_from_tag = function player_from_tag(elem) {\n    var att, config, pl;\n    config = {};\n\n    for (var a = 0; a < elem.attributes.length; a++) {\n      att = elem.attributes[a];\n      if (BasicPlayer.attributes[att.name]) BasicPlayer.attributes[att.name].call(config, att.value, att.name);\n    }\n\n    pl = new BasicPlayer(elem, config);\n    elem._wgo_player = pl;\n  };\n\n  WGo.BasicPlayer = BasicPlayer;\n  window.addEventListener(\"load\", function () {\n    var pl_elems = document.querySelectorAll(\"[data-wgo],[data-wgo-diagram]\");\n\n    for (var i = 0; i < pl_elems.length; i++) {\n      player_from_tag(pl_elems[i]);\n    }\n  });\n})(WGo);",{"version":3,"sources":["/Users/linchengxun/Desktop/vuego-testfunc/wgo.js-master/wgo/basicplayer.js"],"names":["WGo","pl_count","playerBlock","name","parent","visible","e","element","document","createElement","className","wrapper","appendChild","style","display","BPgenerateDom","dom","center","board","regions","left","right","top","bottom","getCurrentLayout","cl","config","layout","constructor","Array","bh","height","maxHeight","i","length","conditions","minWidth","width","minHeight","maxWidth","custom","call","appendComponents","area","components","currentLayout","BasicPlayer","component","appendTo","_detachFromPlayer","manageComponents","key","parentNode","removeChild","extendClass","Player","elem","default","undefined","innerHTML","classes","id","Board","init","window","addEventListener","noresize","updateDimensions","bind","initGame","prototype","css","getComputedStyle","els","firstChild","push","tmp_w","tmp_h","tmp_mh","lastLayout","bw","clientWidth","offsetHeight","setHeight","setWidth","diff","paddingTop","showMessage","text","closeCallback","permanent","info_overlay","offsetWidth","info_message","close_info","t","hideMessage","setFrozen","error","err","ERROR_REPORT","url","message","stacktrace","layouts","dynamicLayout","i18n","en","attributes","value","sgf","sgfFile","eval","kifuLoaded","Function","update","frozen","unfrozen","toLowerCase","enableWheel","lockScroll","enableKeys","rememberPath","allowIllegalMoves","m","isNaN","move","markLastMove","player_from_tag","att","pl","a","_wgo_player","pl_elems","querySelectorAll"],"mappings":"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","sourcesContent":["/* eslint-disable */\n(function(WGo){\n\n\"use strict\";\n\n// player counter - for creating unique ids\nvar pl_count = 0;\n\n// generate DOM of region\nvar playerBlock = function(name, parent, visible) {\n\tvar e = {};\n\te.element = document.createElement(\"div\");\n\te.element.className = \"wgo-player-\"+name;\n\te.wrapper = document.createElement(\"div\");\n\te.wrapper.className = \"wgo-player-\"+name+\"-wrapper\";\n\te.element.appendChild(e.wrapper);\n\tparent.appendChild(e.element);\n\tif(!visible) e.element.style.display = \"none\";\n\treturn e;\n}\n\n// generate all DOM of player\nvar BPgenerateDom = function() {\n\t// wrapper object for common DOM\n\tthis.dom = {};\n\t\n\t// center element\n\tthis.dom.center = document.createElement(\"div\");\n\tthis.dom.center.className = \"wgo-player-center\";\n\t\n\t// board wrapper element\n\tthis.dom.board = document.createElement(\"div\");\n\tthis.dom.board.className = \"wgo-player-board\";\n\t\n\t// object wrapper for regions (left, right, top, bottom)\n\tthis.regions = {};\n\t\n\t/*\n\tpseudo DOM structure:\n\t<main>\n\t\t<left></left>\n\t\t<center>\n\t\t\t<top></top>\n\t\t\t<board></board>\n\t\t\t<bottom></bottom>\n\t\t</center>\n\t\t<right></right>\n\t</main>\n\t*/\n\t\n\tthis.regions.left = playerBlock(\"left\", this.element);\n\tthis.element.appendChild(this.dom.center);\n\tthis.regions.right = playerBlock(\"right\", this.element);\n\t\n\tthis.regions.top = playerBlock(\"top\", this.dom.center);\n\tthis.dom.center.appendChild(this.dom.board);\n\tthis.regions.bottom = playerBlock(\"bottom\", this.dom.center);\n}\n\nvar getCurrentLayout = function() {\n\tvar cl = this.config.layout;\n\tif(cl.constructor != Array) return cl;\n\t\n\tvar bh = this.height || this.maxHeight;\n\tfor(var i = 0; i < cl.length; i++) {\n\t\t\n\t\tif(!cl[i].conditions || (\n\t\t\t(!cl[i].conditions.minWidth || cl[i].conditions.minWidth <= this.width) &&\n\t\t\t(!cl[i].conditions.minHeight || !bh || cl[i].conditions.minHeight <= bh) &&\n\t\t\t(!cl[i].conditions.maxWidth || cl[i].conditions.maxWidth >= this.width) &&\n\t\t\t(!cl[i].conditions.maxHeight || !bh || cl[i].conditions.maxHeight >= bh) &&\n\t\t\t(!cl[i].conditions.custom || cl[i].conditions.custom.call(this))\n\t\t  )) {\n\t\t\treturn cl[i];\n\t\t}\n\t}\n}\n\nvar appendComponents = function(area) {\n\tvar components;\n\t\n\tif(this.currentLayout.layout) components = this.currentLayout.layout[area];\n\telse components = this.currentLayout[area];\n\t\n\tif(components) {\n\t\tthis.regions[area].element.style.display = \"block\";\n\t\t\n\t\tif(components.constructor != Array) components = [components];\n\t\t\n\t\tfor(var i in components) {\n\t\t\tif(!this.components[components[i]]) this.components[components[i]] = new BasicPlayer.component[components[i]](this);\n\t\t\t\n\t\t\tthis.components[components[i]].appendTo(this.regions[area].wrapper);\n\t\t\t\n\t\t\t// remove detach flag\n\t\t\tthis.components[components[i]]._detachFromPlayer = false;\n\t\t}\n\t}\n\telse {\n\t\tthis.regions[area].element.style.display = \"none\";\n\t}\n\n}\n\nvar manageComponents = function() {\n\t// add detach flags to every widget\n\tfor(var key in this.components) {\n\t\tthis.components[key]._detachFromPlayer = true;\n\t}\n\t\n\tappendComponents.call(this, \"left\");\n\tappendComponents.call(this, \"right\");\n\tappendComponents.call(this, \"top\");\n\tappendComponents.call(this, \"bottom\");\n\t\n\t// detach all invisible components\n\tfor(var key in this.components) {\n\t\tif(this.components[key]._detachFromPlayer && this.components[key].element.parentNode) this.components[key].element.parentNode.removeChild(this.components[key].element);\n\t}\n}\n\n/**\n * Main object of player, it binds all magic together and produces visible player.\n * It inherits some functionality from WGo.Player, but full html structure is done here.\n *\n * Layout of player can be set. It can be even dynamic according to screen resolution. \n * There are 5 areas - left, right, top and bottom, and there is special region for board.\n * You can put BasicPlayer.Component objects to these regions. Basic components are: \n *  - BasicPlayer.CommentBox - box with comments and game informations\n *  - BasicPlayer.InfoBox - box with information about players\n *  - BasicPlayer.Control - buttons and staff for control\n *\n * Possible configurations:\n *  - sgf: sgf string (default: undefined)\n *  - json: kifu stored in json/jgo (default: undefined)\n *  - sgfFile: sgf file path (default: undefined)\n *  - board: configuration object of board (default: {})\n *  - enableWheel: allow player to be controlled by mouse wheel (default: true)\n *  - lockScroll: disable window scrolling while hovering player (default: true)\n *  - enableKeys: allow player to be controlled by arrow keys (default: true)\n *  - kifuLoaded: extra Player's kifuLoaded event listener (default: undefined)\n *  - update: extra Player's update event listener (default: undefined)\n *  - frozen: extra Player's frozen event listener (default: undefined)\n *  - unfrozen: extra Player's unfrozen event listener (default: undefined)\n *  - layout: layout object. Look below how to define your own layout (default: BasicPlayer.dynamicLayout)\n *\n * You also must specify main DOMElement of player. \n */\n\nvar BasicPlayer = WGo.extendClass(WGo.Player, function(elem, config) {\n\tthis.config = config;\n\t\n\t// add default configuration of BasicPlayer\n\tfor(var key in BasicPlayer.default) if(this.config[key] === undefined && BasicPlayer.default[key] !== undefined) this.config[key] = BasicPlayer.default[key];\n\t// add default configuration of Player class\n\tfor(var key in WGo.Player.default) if(this.config[key] === undefined && WGo.Player.default[key] !== undefined) this.config[key] = WGo.Player.default[key];\n\t\n\tthis.element = elem\n\tthis.element.innerHTML = \"\";\n\tthis.classes = (this.element.className ? this.element.className+\" \" : \"\")+\"wgo-player-main\" ;\n\tthis.element.className = this.classes;\n\tif(!this.element.id) this.element.id = \"wgo_\"+(pl_count++);\n\t\n\tBPgenerateDom.call(this);\n\t\n\tthis.board = new WGo.Board(this.dom.board, this.config.board);\n\t\n\tthis.init();\n\t\n\tthis.components = {};\n\t\n\twindow.addEventListener(\"resize\", function() {\n\t\tif(!this.noresize) {\n\t\t\tthis.updateDimensions();\n\t\t}\n\t\t\n\t}.bind(this));\n\t\n\tthis.updateDimensions();\n\t\n\tthis.initGame();\n});\n\n/**\n * Append player to different element.\n */\n \nBasicPlayer.prototype.appendTo = function(elem) {\n\telem.appendChild(this.element);\n\tthis.updateDimensions();\n}\n\n/**\n * Set right dimensions of all elements.\n */\n\t\nBasicPlayer.prototype.updateDimensions = function() {\n\tvar css = window.getComputedStyle(this.element);\n\t\n\tvar els = [];\n\twhile(this.element.firstChild) {\n\t\tels.push(this.element.firstChild);\n\t\tthis.element.removeChild(this.element.firstChild);\n\t}\n\t\n\tvar tmp_w = parseInt(css.width);\n\tvar tmp_h = parseInt(css.height);\n\tvar tmp_mh = parseInt(css.maxHeight) || 0;\n\n\tfor(var i = 0; i < els.length; i++) {\n\t\tthis.element.appendChild(els[i]);\n\t}\n\n\tif(tmp_w == this.width && tmp_h == this.height && tmp_mh == this.maxHeight) return;\n\t\n\tthis.width = tmp_w;\n\tthis.height = tmp_h;\n\tthis.maxHeight = tmp_mh;\n\n\tthis.currentLayout = getCurrentLayout.call(this);\n\n\tif(this.currentLayout && this.lastLayout != this.currentLayout) {\n\t\tif(this.currentLayout.className) this.element.className = this.classes+\" \"+this.currentLayout.className;\n\t\telse this.element.className = this.classes;\n\t\tmanageComponents.call(this);\n\t\tthis.lastLayout = this.currentLayout;\n\t}\n\t\n\t//var bw = this.width - this.regions.left.element.clientWidth - this.regions.right.element.clientWidth;\n\tvar bw = this.dom.board.clientWidth;\n\tvar bh = this.height || this.maxHeight;\n\n\tif(bh) {\n\t\tbh -= this.regions.top.element.offsetHeight + this.regions.bottom.element.offsetHeight;\n\t}\n\t\n\tif(bh && bh < bw) {\n\t\tif(bh != this.board.height) this.board.setHeight(bh);\n\t}\n\telse {\n\t\tif(bw != this.board.width) this.board.setWidth(bw);\n\t}\n\t\n\tvar diff = bh - bw;\n\t\n\tif(diff > 0) {\n\t\tthis.dom.board.style.height = bh+\"px\";\n\t\tthis.dom.board.style.paddingTop = (diff/2)+\"px\";\n\t}\n\telse {\n\t\tthis.dom.board.style.height = \"auto\";\n\t\tthis.dom.board.style.paddingTop = \"0\";\n\t}\n\t\n\tthis.regions.left.element.style.height = this.dom.center.offsetHeight+\"px\";\n\tthis.regions.right.element.style.height = this.dom.center.offsetHeight+\"px\";\n\n\tfor(var i in this.components) {\n\t\tif(this.components[i].updateDimensions) this.components[i].updateDimensions();\n\t}\n}\n\t\n/**\n * Layout contains built-in info box, for displaying of text(html) messages.\n * You can use this method to display a message.\n * \n * @param text or html to display\n * @param closeCallback optional callback function which is called when message is closed\n */\n\nBasicPlayer.prototype.showMessage = function(text, closeCallback, permanent) {\n\tthis.info_overlay = document.createElement(\"div\");\n\tthis.info_overlay.style.width = this.element.offsetWidth+\"px\";\n\tthis.info_overlay.style.height = this.element.offsetHeight+\"px\";\n\tthis.info_overlay.className = \"wgo-info-overlay\";\n\tthis.element.appendChild(this.info_overlay);\n\t\n\tvar info_message = document.createElement(\"div\");\n\tinfo_message.className = \"wgo-info-message\";\n\tinfo_message.innerHTML = text;\n\t\n\tvar close_info = document.createElement(\"div\");\n\tclose_info.className = \"wgo-info-close\";\n\tif(!permanent) close_info.innerHTML = WGo.t(\"BP:closemsg\");\n\t\n\tinfo_message.appendChild(close_info);\n\t\n\tthis.info_overlay.appendChild(info_message);\n\t\n\tif(closeCallback) {\n\t\tthis.info_overlay.addEventListener(\"click\",function(e) {\n\t\t\tcloseCallback(e);\n\t\t});\n\t}\n\telse if(!permanent) {\n\t\tthis.info_overlay.addEventListener(\"click\",function(e) {\n\t\t\tthis.hideMessage();\n\t\t}.bind(this));\n\t}\n\t\n\tthis.setFrozen(true);\n}\n\n/**\n * Hide a message box.\n */\n \nBasicPlayer.prototype.hideMessage = function() {\n\tthis.element.removeChild(this.info_overlay);\n\tthis.setFrozen(false);\n}\n\n/**\n * Error handling\n */\n\nBasicPlayer.prototype.error = function(err) {\n\tif(!WGo.ERROR_REPORT) throw err;\n\t\n\tvar url = \"#\";\n\t\n\tswitch(err.name) {\n\t\tcase \"InvalidMoveError\": \n\t\t\tthis.showMessage(\"<h1>\"+err.name+\"</h1><p>\"+err.message+\"</p><p>If this message isn't correct, please report it by clicking <a href=\\\"\"+url+\"\\\">here</a>, otherwise contact maintainer of this site.</p>\");\n\t\tbreak;\n\t\tcase \"FileError\":\n\t\t\tthis.showMessage(\"<h1>\"+err.name+\"</h1><p>\"+err.message+\"</p><p>Please contact maintainer of this site. Note: it is possible to read files only from this host.</p>\");\n\t\tbreak;\n\t\tdefault:\n\t\t\tthis.showMessage(\"<h1>\"+err.name+\"</h1><p>\"+err.message+\"</p><pre>\"+err.stacktrace+\"</pre><p>Please contact maintainer of this site. You can also report it <a href=\\\"\"+url+\"\\\">here</a>.</p>\");\n\t}\n} \n\nBasicPlayer.component = {};\n\n/**\n * Preset layouts\n * They have defined regions as arrays, which can contain components. For each of these layouts each component specifies where it is placed.\n * You can create your own layout in same manners, but you must specify components manually.\n */\n \nBasicPlayer.layouts = {\n\t\"one_column\": {\n\t\ttop: [],\n\t\tbottom: [],\n\t},\n\t\"no_comment\": {\n\t\ttop: [],\n\t\tbottom: [],\n\t},\n\t\"right_top\": {\n\t\ttop: [],\n\t\tright: [],\n\t},\n\t\"right\": {\n\t\tright: [],\n\t},\n\t\"minimal\": {\n\t\tbottom: []\n\t},\n};\n\n/**\n * WGo player can have more layouts. It allows responsive design of the player.\n * Possible layouts are defined as array of object with this structure:\n * \n * layout = {\n *   Object layout, // layout as specified above\n *   Object conditions, // conditions that has to be valid to apply this layout\n *   String className // custom classnames\n * }\n *\n * possible conditions:\n *  - minWidth - minimal width of player in px\n *  - maxWidth - maximal width of player in px\n *  - minHeight - minimal height of player in px\n *  - maxHeight - maximal height of player in px\n *  - custom - function which is called in template context, must return true or false\n *\n * Player's template evaluates layouts step by step and first layout that matches the conditions is applied.\n *\n * Look below at the default dynamic layout. Layouts are tested after every window resize.\n */\n\nBasicPlayer.dynamicLayout = [\n\t{\n\t\tconditions: {\n\t\t\tminWidth: 650,\n\t\t},\n\t\tlayout: BasicPlayer.layouts[\"right_top\"], \n\t\tclassName: \"wgo-twocols wgo-large\",\n\t},\n\t{\n\t\tconditions: {\n\t\t\tminWidth: 550,\n\t\t\tminHeight: 600,\n\t\t},\n\t\tlayout: BasicPlayer.layouts[\"one_column\"],\n\t\tclassName: \"wgo-medium\"\n\t},\n\t{\n\t\tconditions: {\n\t\t\tminWidth: 350,\n\t\t},\n\t\tlayout: BasicPlayer.layouts[\"no_comment\"],\n\t\tclassName: \"wgo-small\"\n\t},\n\t{\t// if conditions object is omitted, layout is applied \n\t\tlayout: BasicPlayer.layouts[\"no_comment\"],\n\t\tclassName: \"wgo-xsmall\",\n\t},\n];\n\n// default settings, they are merged with user settings in constructor.\nBasicPlayer.default = {\n\tlayout: BasicPlayer.dynamicLayout,\n}\n\nWGo.i18n.en[\"BP:closemsg\"] = \"click anywhere to close this window\";\n\n//--- Handling <div> with HTML5 data attributes -----------------------------------------------------------------\n\nBasicPlayer.attributes = {\n\t\"data-wgo\": function(value) {\n\t\tif(value) {\n\t\t\tif(value[0] == \"(\") this.sgf = value;\n\t\t\telse this.sgfFile = value;\n\t\t}\n\t},\n\t\n\t\"data-wgo-board\": function(value) {\n\t\t// using eval to parse strings like \"stoneStyle: 'painted'\"\n\t\tthis.board = eval(\"({\"+value+\"})\");\n\t},\n\t\n\t\"data-wgo-onkifuload\": function(value) {\n\t\tthis.kifuLoaded = new Function(value);\n\t},\n\t\n\t\"data-wgo-onupdate\": function(value) {\n\t\tthis.update = new Function(value);\n\t},\n\t\n\t\"data-wgo-onfrozen\": function(value) {\n\t\tthis.frozen = new Function(value);\n\t},\n\t\n\t\"data-wgo-onunfrozen\": function(value) {\n\t\tthis.unfrozen = new Function(value);\n\t},\n\t\n\t\"data-wgo-layout\": function(value) {\n\t\tthis.layout = eval(\"({\"+value+\"})\");\n\t},\n\t\n\t\"data-wgo-enablewheel\": function(value) {\n\t\tif(value.toLowerCase() == \"false\") this.enableWheel = false;\n\t},\n\t\n\t\"data-wgo-lockscroll\": function(value) {\n\t\tif(value.toLowerCase() == \"false\") this.lockScroll = false;\n\t},\n\t\n\t\"data-wgo-enablekeys\": function(value) {\n\t\tif(value.toLowerCase() == \"false\") this.enableKeys = false;\n\t},\n\t\n\t\"data-wgo-rememberpath\": function(value) {\n\t\tif(value.toLowerCase() == \"false\") this.rememberPath = false;\n\t},\n\t\n\t\"data-wgo-allowillegal\": function(value) {\n\t\tif(value.toLowerCase() != \"false\") this.allowIllegalMoves = true;\n\t},\n\t\n\t\"data-wgo-move\": function(value) {\n\t\tvar m = parseInt(value);\n\t\tif(!isNaN(m)) this.move = m;\n\t\telse this.move = eval(\"({\"+value+\"})\");\n\t},\n\n\t\"data-wgo-marklastmove\": function(value) {\n\t\tif(value.toLowerCase() == \"false\") this.markLastMove = false;\n\t},\n\n\t\"data-wgo-diagram\": function(value) {\n\t\tif(value) {\n\t\t\tif(value[0] == \"(\") this.sgf = value;\n\t\t\telse this.sgfFile = value;\n\n\t\t\tthis.markLastMove = false;\n\t\t\tthis.enableKeys = false;\n\t\t\tthis.enableWheel = false;\n\t\t\tthis.layout = {top: [], right: [], left: [], bottom: []};\n\t\t}\n\t}\n}\n\nvar player_from_tag = function(elem) {\n\tvar att, config, pl;\n\t\n\tconfig = {};\n\n\tfor(var a = 0; a < elem.attributes.length; a++) {\n\t\tatt = elem.attributes[a];\n\t\tif(BasicPlayer.attributes[att.name]) BasicPlayer.attributes[att.name].call(config, att.value, att.name);\n\t}\n\n\tpl = new BasicPlayer(elem, config);\n\telem._wgo_player = pl;\n}\n\nWGo.BasicPlayer = BasicPlayer;\n\nwindow.addEventListener(\"load\", function() {\n\tvar pl_elems = document.querySelectorAll(\"[data-wgo],[data-wgo-diagram]\");\n\n\tfor(var i = 0; i < pl_elems.length; i++) {\n\t\tplayer_from_tag(pl_elems[i]);\n\t}\n});\n\n})(WGo);\n"]}]}